<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Srusti Donapati">
<meta name="dcterms.date" content="2023-06-08">

<title>GPT in Genomics - Practicing Working with Terminal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">GPT in Genomics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Practicing Working with Terminal</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">blog</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Srusti Donapati </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 8, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="working-with-terminal-github-vscode" class="level1">
<h1>Working with Terminal ( + GitHub &amp; VSCode)</h1>
<p>The goal of this 8 week program is to be able to train an LLM to take in a full DNA sequence and predict some biological mechanism, such as gene expression or the effect of transcription factor binding. This can only be accomplished by using a supercomputer with many, many GPUs. These supercomputers will take in the training code from the terminal (or VSCode), which is why it is necessary to learn how to use VSCode and navigate the command line on the terminal of the laptop.</p>
<p>First, you need to ensure that your new file that you are working on is in the correct environment. An environment is kind of like a storage area on your laptop for all your programming tools (e.g.&nbsp;Python)– it’s basically like a folder for everything you need.</p>
<p><strong>Conda:</strong> Conda is an environment management tool which ensures that all your code, program, and files for a specific project are in the same environment. It also manages the installation, updating, and removal of packages (e.g.&nbsp;numpy, pandas, etc.). Conda comes with Anaconda and Miniconda, which you can download from the internet and have all the tools you would need to explore, model, and visualize datasets and more.</p>
<section id="make-a-new-environment" class="level3">
<h3 class="anchored" data-anchor-id="make-a-new-environment"><strong>Make a New Environment</strong></h3>
<p>Open terminal. Type the following, where “envname” is what you want to call your new environment:</p>
<p>conda create —name envname</p>
</section>
<section id="activate-newly-created-environment" class="level3">
<h3 class="anchored" data-anchor-id="activate-newly-created-environment">Activate Newly Created Environment</h3>
<p>Do this to enter your desired environment. Type the following, where “envname” is your environment name:</p>
<p>conda activate envname</p>
</section>
<section id="installing-tools-for-programming-in-python-within-new-environment" class="level3">
<h3 class="anchored" data-anchor-id="installing-tools-for-programming-in-python-within-new-environment">Installing Tools for Programming in Python within New Environment</h3>
<p>Type the following:</p>
<p>conda install python</p>
</section>
<section id="install-pip-before-installing-packages-for-python" class="level3">
<h3 class="anchored" data-anchor-id="install-pip-before-installing-packages-for-python">Install “pip” before installing packages for Python</h3>
<p>pip is is a package management system used to install and manage software packages written in Python. It is a command-line tool that comes bundled with Python installations.</p>
<p><strong>To install pip:</strong></p>
<p>conda install pip</p>
<p><strong>Note: Make sure you are in the desired environment while doing this.</strong></p>
<p>You can check that you are in that desired environment if the environment name is in the parenthesis before the remaining line of code produced by terminal. So, after you activate the environment, it should produce something like this:</p>
<p>(envname) Your-MacBook-Pro:~ macusername$</p>
<p>When you are in the “normal” default environment, it will look something like this:</p>
<p>(base) Your-MacBook-Pro:~ macusername$</p>
</section>
<section id="various-pip-commands" class="level3">
<h3 class="anchored" data-anchor-id="various-pip-commands">Various pip commands</h3>
<p>Here are some commonly used <strong><code>pip</code></strong> commands:</p>
<ul>
<li><strong><code>pip install package_name</code></strong>: Installs a package from PyPI or another source.</li>
</ul>
<p>**For example, for installing numpy: python -m pip install numpy</p>
<p>Note: The <strong><code>-m</code></strong> flag is commonly used for running Python scripts that are part of a package or when you want to ensure that the module is executed with the correct environment and dependencies.</p>
<ul>
<li><p><strong><code>pip uninstall package_name</code></strong>: Uninstalls a package.</p></li>
<li><p><strong><code>pip list</code></strong>: Lists installed packages.</p></li>
<li><p><strong><code>pip search package_name</code></strong>: Searches PyPI for packages matching the given name.</p></li>
<li><p><strong><code>pip show package_name</code></strong>: Displays information about a specific package.</p></li>
<li><p><strong><code>pip freeze</code></strong>: Generates a requirements.txt file containing a list of installed packages and their versions.</p></li>
</ul>
</section>
<section id="using-vscode-with-desired-environment" class="level3">
<h3 class="anchored" data-anchor-id="using-vscode-with-desired-environment">Using VSCode with Desired Environment</h3>
<p>VSCode has an integrated terminal that allows you to run commands directly within the editor. However, VSCode’s integrated terminal supports various shells, including PowerShell, Command Prompt (Windows), and Bash (macOS/Linux). So, while coding in VSCode, you need to make sure your code file is in the correct environment for your project. To do this, click on the bottom right of the screen on VSCode (in this example, the tab that says “3.11.3 (‘dlgtools’:conda). dlgtools is the name of my desired project environment. If the name of the environment is not the environment you want to work in, simply click on it and VSCode should open a tab at the top of your screen which says”Select Interpreter” and you can switch into a different environment. Your file will then be stored in this environment, so any packages or programs (like Python) which you plan to use in that file should be in that environment.</p>
<p><img src="images/Screen Shot 2023-06-08 at 3.22.19 PM.png" class="img-fluid"></p>
</section>
<section id="checking-to-see-if-you-have-python" class="level3">
<h3 class="anchored" data-anchor-id="checking-to-see-if-you-have-python">Checking to See If You Have Python</h3>
<p>Once the terminal is open, type <strong><code>python --version</code></strong> or <strong><code>python3 --version</code></strong> and press Enter.</p>
<ul>
<li><p>If Python is installed, the command will display the version number of Python installed on your system. For example, you might see something like <strong><code>Python 3.9.2</code></strong>.</p></li>
<li><p>If Python is not installed or if the command is not recognized, you will typically see an error message indicating that the command is not found or recognized. In this case, you’ll need to install Python.</p></li>
</ul>
</section>
<section id="checking-your-vscode-in-terminal" class="level3">
<h3 class="anchored" data-anchor-id="checking-your-vscode-in-terminal">Checking Your VSCode in Terminal</h3>
<p>It is usually very difficult to see the output of your code in the integrated terminal of VSCode because it is kind of obscured among the lines about your system, device username, etc. To more clearly see the outputs of your code, you can do the following options:</p>
<ol type="1">
<li><strong>Check the code outputs directly in your device’s terminal.</strong></li>
</ol>
<ul>
<li><p>Open terminal.</p></li>
<li><p>Making sure you are in the desired environment (check the parenthesis), type the following, where file_name is the name of the VSCode file you want to check the code for:</p></li>
<li><p>from file_name import *</p></li>
<li><p>This should clearly produce all the outputs for your code</p></li>
</ul>
<ol start="2" type="1">
<li><p><strong>Copy-paste the code into Jupyter Notebook, Google Colab, or some other software with all the packages and tools built in and run the code.</strong></p></li>
<li><p><strong>Add the following line of code at the very top and very bottom of your coding file to create some space between the outputs within the integrated terminal of VSCode itself. This may not be as helpful to clearly see the code, but it may make a slight difference in visibility.</strong></p></li>
</ol>
<ul>
<li>print(“\n \n \n --------------- \n \n \n”)</li>
</ul>
</section>
</section>
<section id="file-navigation-in-terminal" class="level1">
<h1>File Navigation in Terminal</h1>
<p>Here are some basic commands in your device’s terminal to make sure you are storing all your files within the desired directory. A directory is basically a type of folder on your device. You need to know which directory you are putting your project files so that you do not lose any important files in the short or long-term.</p>
<p><img src="images/Screen Shot 2023-06-07 at 2.00.19 PM.png" class="img-fluid"></p>
<section id="additional-navigation-commands-in-terminal" class="level3">
<h3 class="anchored" data-anchor-id="additional-navigation-commands-in-terminal">Additional Navigation Commands in Terminal:</h3>
<p>open . → opens the directory you are currently in</p>
<p>cd .. → goes to the parent directory (“steps back”)</p>
<p>ls -a → see all files within the directory (including hidden ones with .git)</p>
<p>cd \ → goes to the root directory of the hardware system (the furthest back root)</p>
<p>Basically, I would start by typing “pwd” in Terminal to determine which directory I am currently in. If you need to move back into an earlier parent folder/directory, type cd ..</p>
<p>If you want to move into a further directory, type cd directory_name.</p>
<p>If you do not know the name of the directory you want to move further into, or if you do not know if that directory is within your current working directory, type ls to see all directories/files within your current working directory.</p>
<p>ls-a shows all the hidden files as well. Hidden files are files which work in the background of your project, and will begin with a . , which as .git or .nojekyll.</p>
<p>After navigating into the root directory using cd \, and then going into the desired directory, you can type “echo $PATH” to get the path to get to that directory.</p>
</section>
</section>
<section id="githubgit-commands-in-terminal" class="level1">
<h1>Github/Git Commands in Terminal</h1>
<section id="cloning-on-github" class="level3">
<h3 class="anchored" data-anchor-id="cloning-on-github"><strong>Cloning on GitHub</strong></h3>
<p>Cloning refers to creating a local copy of an entire repository, including all its files, commit history, branches, and configuration. When you clone a repository, you create an identical copy on your local machine. This allows you to work with the project, make changes, commit them, and push them back to the remote repository. Cloning is typically used when you want to contribute to a project or work on your own project locally.</p>
<p><strong>To clone a repository from GitHub, follow these steps:</strong></p>
<ol type="1">
<li><p>Open the GitHub repository page in your web browser.</p></li>
<li><p>Click on the “Code” button, located near the top-right corner of the repository page.</p></li>
<li><p>Click on the clipboard icon to copy the repository’s URL. Alternatively, you can click on the “Download ZIP” button to download a compressed version of the repository instead of cloning it with Git.</p></li>
<li><p>Open your terminal or Git Bash (if you’re on Windows).</p></li>
<li><p>Navigate to the directory where you want to clone the repository. You can use the <strong><code>cd</code></strong> command to change directories.</p></li>
<li><p>Once you’re in the desired directory, use the following command to clone the repository:</p></li>
</ol>
<p>git clone &lt;paste_repository_URL&gt;</p>
</section>
<section id="after-making-changes-to-local-files-on-your-device-you-want-to-sync-those-changes-to-the-remote-master-directory-on-github.-git-is-a-tools-which-allows-this-syncing.-carry-out-the-following-steps-to-do-so" class="level3">
<h3 class="anchored" data-anchor-id="after-making-changes-to-local-files-on-your-device-you-want-to-sync-those-changes-to-the-remote-master-directory-on-github.-git-is-a-tools-which-allows-this-syncing.-carry-out-the-following-steps-to-do-so">After making changes to local files on your device, you want to sync those changes to the remote, master directory on Github. Git is a tools which allows this syncing. Carry out the following steps to do so:</h3>
<ol type="1">
<li><p>git add * → add your changes</p></li>
<li><p>git status → check you are adding the files/directories you want</p></li>
<li><p>git commit -m ‘message’ → add a message</p></li>
<li><p>git push → update the master directory with your work</p></li>
</ol>
</section>
<section id="another-option-pulling-in-github" class="level3">
<h3 class="anchored" data-anchor-id="another-option-pulling-in-github">Another option – “pulling” in Github:</h3>
<p>Pulling is the opposite of pushing: it’s what you do when the <strong>remote</strong>, master directory (maybe owned by someone other than you) has changes and you want to update your <strong>local</strong> directory with those changes. Typically used in collaborative files.</p>
<ul>
<li>git pull → update your local directory with the master (remote) directory</li>
</ul>
</section>
<section id="when-would-you-pull" class="level3">
<h3 class="anchored" data-anchor-id="when-would-you-pull">When would you pull?</h3>
<p>The `git pull` command is used to update your local repository with the latest changes from a remote repository, typically the one you cloned from. It incorporates changes made by others and brings your local copy up to date.</p>
<p>You would use `git pull` in a few different scenarios:</p>
<p>1. **Working on a shared project**: If you are collaborating with other people on a project, they might have made changes to the remote repository that you want to sync with. Running `git pull` will fetch those changes and merge them into your local branch.</p>
<p>2. **Staying up to date**: Even if you’re not collaborating with others, it’s good practice to regularly update your local repository with the latest changes from the remote repository. This ensures that you have the most recent version of the code and can avoid conflicts when you eventually push your own changes.</p>
<p>3. **Resolving conflicts**: Sometimes, when you pull changes from the remote repository, there might be <strong>conflicts</strong> between your local changes and the incoming changes. For example, if someone edited the same lines which you edited, and now there are different versions of the same file in the repo. In such cases, Git will notify you of the conflicts and provide an opportunity to resolve them manually.</p>
<p>It’s important to note that before running `git pull`, you should commit your local changes to avoid conflicts. If you have uncommitted changes, Git may ask you to stash or commit them before pulling.</p>
</section>
<section id="forking-in-github" class="level3">
<h3 class="anchored" data-anchor-id="forking-in-github">Forking in Github:</h3>
<p>Forking a file in GitHub is like making a personal copy of someone else’s file or project. When you fork a file, you create your own version of it that you can modify and make changes to without affecting the original file.</p>
<p>Here’s a simple analogy: Imagine you have a friend who has a really cool drawing. You want to add your own touches and modifications to that drawing, but you don’t want to mess up your friend’s original. So, what you do is make a photocopy of the drawing and work on that copy. This way, you can freely experiment and make changes without worrying about ruining the original.</p>
<p>In GitHub, forking is similar. If you find a file or project in someone else’s repository that you want to modify or contribute to, you can fork it to create your own personal copy of that repository. This copy will be stored in your GitHub account, and you can make changes without affecting the original file or the owner’s repository.</p>
<p>Once you’ve made the desired changes to your forked repository, you can choose to share those changes with the original owner through a process called a <strong>pull request</strong>. This allows the owner to review your changes and decide whether to incorporate them into the original file or project.</p>
</section>
<section id="how-to-fork-a-file-on-github" class="level3">
<h3 class="anchored" data-anchor-id="how-to-fork-a-file-on-github">How to fork a file on Github?</h3>
<p>To fork a repository in GitHub, including all its files, branches, and commit history, follow these steps:</p>
<ol type="1">
<li><p>Open your web browser and go to the GitHub repository page that contains the file you want to fork.</p></li>
<li><p>In the top-right corner of the repository page, click on the “Fork” button.</p></li>
<li><p>GitHub will prompt you to select where you want to fork the repository. Choose your user account or any organization you belong to. Click on the appropriate option.</p></li>
<li><p>GitHub will then create a copy of the repository under your account or organization. Once the forking process is complete, you will be redirected to the forked repository’s page.</p></li>
</ol>
<p>Now you have successfully forked the entire repository, not just an individual file. You will have a separate copy of the repository in your GitHub account. This copy will include all the files, branches, and commit history present in the original repository.</p>
<p>You can make changes to the files, add new features, fix bugs, or experiment with the forked repository as you see fit. You can commit and push changes to the forked repository without affecting the original repository</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>